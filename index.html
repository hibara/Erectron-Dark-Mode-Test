<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <!-- pakcage.jsonから読み込み -->
  <title></title>
  <link rel="stylesheet" href="assets/reset.css">
  <link rel="stylesheet" href="assets/style.css">
  <script src="assets/jquery-3.5.1.min.js"></script>
</head>
<body>

<!-- Arrow right icon -->
<svg display="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <symbol id="arrow-right-icon" viewBox="0 0 512 512">
    <g transform="matrix(1,0,0,1,32,0)">
      <path d="M190.5,66.9L212.7,44.7C222.1,35.3 237.3,35.3 246.6,44.7L441,239C450.4,248.4 450.4,263.6 441,272.9L246.6,467.3C237.2,476.7 222,476.7 212.7,467.3L190.5,445.1C181,435.6 181.2,420.1 190.9,410.8L311.4,296L24,296C10.7,296 0,285.3 0,272L0,240C0,226.7 10.7,216 24,216L311.4,216L190.9,101.2C181.1,91.9 180.9,76.4 190.5,66.9Z" style="fill-rule:nonzero;"/>
    </g>
  </symbol>
</svg>
<!-- Sun icon -->
<svg display="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <symbol id="sun-icon" viewBox="0 0 512 512">
    <g>
      <path d="M256,360.099C198.6,360.099 151.901,313.401 151.901,256C151.901,198.599 198.6,151.901 256,151.901C313.4,151.901 360.099,198.6 360.099,256C360.099,313.4 313.4,360.099 256,360.099Z" style="fill-rule:nonzero;"/>
      <path d="M256,116.071C247.716,116.071 241,109.355 241,101.071L241,15C241,6.716 247.716,0 256,0C264.284,0 271,6.716 271,15L271,101.071C271,109.355 264.284,116.071 256,116.071Z" style="fill-rule:nonzero;"/>
      <path d="M146.449,161.449C142.61,161.449 138.771,159.985 135.843,157.056L74.98,96.194C69.122,90.336 69.122,80.839 74.98,74.981C80.837,69.123 90.335,69.123 96.193,74.981L157.055,135.842C162.913,141.7 162.913,151.197 157.055,157.055C154.127,159.984 150.288,161.449 146.449,161.449Z" style="fill-rule:nonzero;"/>
      <path d="M101.071,271L15,271C6.716,271 0,264.284 0,256C0,247.716 6.716,241 15,241L101.071,241C109.355,241 116.071,247.716 116.071,256C116.071,264.284 109.355,271 101.071,271Z" style="fill-rule:nonzero;"/>
      <path d="M85.587,441.413C81.748,441.413 77.909,439.949 74.981,437.019C69.123,431.161 69.123,421.664 74.981,415.806L135.843,354.945C141.701,349.088 151.199,349.088 157.056,354.945C162.914,360.803 162.914,370.3 157.056,376.158L96.193,437.02C93.265,439.948 89.426,441.413 85.587,441.413Z" style="fill-rule:nonzero;"/>
      <path d="M256,512C247.716,512 241,505.284 241,497L241,410.929C241,402.645 247.716,395.929 256,395.929C264.284,395.929 271,402.645 271,410.929L271,497C271,505.284 264.284,512 256,512Z" style="fill-rule:nonzero;"/>
      <path d="M426.413,441.413C422.574,441.413 418.735,439.949 415.807,437.02L354.945,376.159C349.087,370.301 349.087,360.804 354.945,354.946C360.802,349.088 370.3,349.088 376.158,354.946L437.02,415.807C442.878,421.665 442.878,431.162 437.02,437.02C434.091,439.948 430.252,441.413 426.413,441.413Z" style="fill-rule:nonzero;"/>
      <path d="M497,271L410.929,271C402.645,271 395.929,264.284 395.929,256C395.929,247.716 402.645,241 410.929,241L497,241C505.284,241 512,247.716 512,256C512,264.284 505.284,271 497,271Z" style="fill-rule:nonzero;"/>
      <path d="M365.551,161.449C361.712,161.449 357.873,159.985 354.945,157.055C349.087,151.197 349.087,141.7 354.945,135.842L415.807,74.981C421.664,69.125 431.162,69.123 437.02,74.981C442.878,80.839 442.878,90.336 437.02,96.194L376.158,157.055C373.229,159.984 369.389,161.449 365.551,161.449Z" style="fill-rule:nonzero;"/>
    </g>
  </symbol>
</svg>
<!-- Moon icon -->
<svg display="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <symbol id="moon-icon" viewBox="0 0 512 512">
    <g>
      <path d="M459.782,347.328C455.494,342.048 448.294,340.096 441.958,342.368C424.198,348.736 404.934,352 384.646,352C287.59,352 208.646,273.024 208.646,176C208.646,117.6 237.478,63.232 285.766,30.528C291.238,26.816 293.862,20.128 292.39,13.696C290.918,7.264 285.638,2.4 279.078,1.44C271.59,0.352 264.134,0 256.646,0C124.294,0 16.646,107.648 16.646,240C16.646,372.352 124.294,480 256.646,480C340.646,480 417.062,437.312 460.998,365.824C464.55,360.032 464.038,352.64 459.782,347.328Z" style="fill-rule:nonzero;"/>
    </g>
  </symbol>
</svg>


<div id="container">
  
  <div id="left-menu">
    <ul class="list-menu">
      <li class="top-menu">
        <h3>夏目漱石</h3>
        <svg class="arrow-right-svg">
          <use x="0" y="0" xlink:href="#arrow-right-icon"></use>
        </svg>
      </li>
      <li class="sub-menu"><h3>草枕</h3></li>
      <li class="sub-menu"><h3>虞美人草</h3></li>
      <li class="sub-menu"><h3>こころ</h3></li>
      <li class="sub-menu"><h3>三四郎</h3></li>
    </ul>
    
    <ul class="list-menu">
      <li class="top-menu">
        <h3>芥川龍之介</h3>
        <svg class="arrow-right-svg">
          <use x="0" y="0" xlink:href="#arrow-right-icon"></use>
        </svg>
      </li>
      <li class="sub-menu"><h3>或阿呆の一生</h3></li>
      <li class="sub-menu"><h3>河童</h3></li>
      <li class="sub-menu"><h3>蜘蛛の糸</h3></li>
      <li class="sub-menu"><h3>羅生門</h3></li>
    </ul>
    
    <ul class="list-menu">
      <li class="top-menu">
        <h3>太宰治</h3>
        <svg class="arrow-right-svg">
          <use x="0" y="0" xlink:href="#arrow-right-icon"></use>
        </svg>
      </li>
      <li class="sub-menu"><h3>走れメロス</h3></li>
      <li class="sub-menu"><h3>津軽</h3></li>
      <li class="sub-menu"><h3>お伽草紙</h3></li>
      <li class="sub-menu"><h3>人間失格</h3></li>
    </ul>
    
    <ul class="list">
      <li class="top-menu">
        <h3>宮沢賢治</h3>
        <svg class="arrow-right-svg">
          <use x="0" y="0" xlink:href="#arrow-right-icon"></use>
        </svg>
      </li>
      <li class="sub-menu"><h3>銀河鉄道の夜</h3></li>
      <li class="sub-menu"><h3>風の又三郎</h3></li>
      <li class="sub-menu"><h3>注文の多い料理店</h3></li>
      <li class="sub-menu"><h3>春と修羅</h3></li>
    </ul>
  </div>
  
  <div id="main">

    <div id="header"><p>夏目 漱石『草枕』</p></div>

    <!-- ダークモードをシステムの自動表示に任せるか否かを示すトグルスイッチ -->
    <div class="system-theme-toggle-button system-theme-toggle-switch">
      <input id="checkbox-system-toggle" type="checkbox">
      <label for="checkbox-system-toggle" data-on-text="自動On" data-off-text="自動Off"></label>
      <div class="system-theme-toggle-button-icon"></div>
    </div>
    
    <!-- ダークモード切り替えトグルスイッチ -->
    <div id="dark-mode-toggle">
      <input type="checkbox" class="checkbox-dark-toggle" id="checkbox-dark-toggle" disabled/>
      <label class="label" for="checkbox-dark-toggle">
        <svg class="dark-mode-svg">
          <use x="0" y="0" xlink:href="#moon-icon"></use>
        </svg>
        <svg class="light-mode-svg">
          <use x="0" y="0" xlink:href="#sun-icon"></use>
        </svg>
        <div class="ball"></div>
      </label>
    </div>
    
    <!-- コンテンツの内容 -->
    <div class="sheet">
      <p>
        　山路を登りながら、こう考えた。
        　智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。<br />
        　住みにくさが高じると、安い所へ引き越したくなる。どこへ越しても住みにくいと悟った時、詩が生れて、画が出来る。<br />
        　人の世を作ったものは神でもなければ鬼でもない。やはり向う三軒両隣りにちらちらするただの人である。
        ただの人が作った人の世が住みにくいからとて、越す国はあるまい。あれば人でなしの国へ行くばかりだ。
        人でなしの国は人の世よりもなお住みにくかろう。
      </p>
    </div>
  
    <div class="sheet">
      <p>
        　越す事のならぬ世が住みにくければ、住みにくい所をどれほどか、寛容て、束の間の命を、束の間でも住みよくせねばならぬ。
        ここに詩人という天職が出来て、ここに画家という使命が降る。あらゆる芸術の士は人の世を長閑にし、人の心を豊かにするが故に尊とい。<br />
        　住みにくき世から、住みにくき煩いを引き抜いて、ありがたい世界をまのあたりに写すのが詩である、画である。
        あるは音楽と彫刻である。こまかに云えば写さないでもよい。ただまのあたりに見れば、そこに詩も生き、歌も湧く。
        着想を紙に落さぬとも※［＃「王＋膠のつくり」、第3水準1-88-22］鏘の音は胸裏に起る。
        丹青は画架に向って塗抹せんでも五彩の絢爛は自から心眼に映る。ただおのが住む世を、かく観じ得て、
        霊台方寸のカメラに澆季溷濁の俗界を清くうららかに収め得れば足る。
        この故に無声の詩人には一句なく、無色の画家には尺※［＃「糸＋賺のつくり」、第3水準1-90-17］なきも、
        かく人世を観じ得るの点において、かく煩悩を解脱するの点において、かく清浄界に出入し得るの点において、
        またこの不同不二の乾坤を建立し得るの点において、我利私慾の覊絆を掃蕩するの点において、――千金の子よりも、
        万乗の君よりも、あらゆる俗界の寵児よりも幸福である。
      </p>
    </div>
  
    <div class="sheet">
      <p>
        　世に住むこと二十年にして、住むに甲斐ある世と知った。二十五年にして明暗は表裏のごとく、
        日のあたる所にはきっと影がさすと悟った。三十の今日はこう思うている。
        ――喜びの深きとき憂いよいよ深く、楽みの大いなるほど苦しみも大きい。これを切り放そうとすると身が持てぬ。
        片づけようとすれば世が立たぬ。金は大事だ、大事なものが殖えれば寝る間も心配だろう。
        恋はうれしい、嬉しい恋が積もれば、恋をせぬ昔がかえって恋しかろ。閣僚の肩は数百万人の足を支えている。
        背中には重い天下がおぶさっている。うまい物も食わねば惜しい。少し食えば飽き足らぬ。存分食えばあとが不愉快だ。……<br />
        　余の考がここまで漂流して来た時に、余の右足は突然坐りのわるい角石の端を踏み損くなった。平衡を保つために、
        すわやと前に飛び出した左足が、仕損じの埋め合せをすると共に、余の腰は具合よく方三尺ほどな岩の上に卸りた。
        肩にかけた絵の具箱が腋の下から躍り出しただけで、幸いと何の事もなかった。
      </p>
    </div>
    
  </div>

</div>

<script type="text/javascript">
  // ドキュメントルート
  const doc = $(document.documentElement);

  doc.ready(() => {
    if ( localStorage.getItem('system-theme', false) === true ){
      toggleSystemThemeSwitch.prop('checked', true);
    }
    else{
      toggleSystemThemeSwitch.prop('checked', false);
      if (localStorage.getItem('theme', 'light') === 'dark'){
        toggleUserThemeSwitch.prop('checked', true).change();
      }
      else{
        toggleUserThemeSwitch.prop('checked', false).change();
      }
    }
  });
  
  $('.list-menu').each((index, element) => {
    let topli = $(element).children(":first-child");
    topli.on('click', e => {
      let parent = $(e.currentTarget).parent();
      let sublis = parent.find(".sub-menu");
      if(sublis.is(':visible')){
        // サブメニューのスライド・アップ
        sublis.slideUp();
        // 矢印アイコンのの回転（クラスの追加）
        topli.find('svg').removeClass('rotatedown');
      }
      else{
        // サブメニューのスライド・ダウン
        sublis.slideDown();
        // 矢印アイコンを戻す（クラスの削除）
        topli.find('svg').addClass('rotatedown');
      }
    })
  });

  // ダークモード切り替えスイッチ
  const toggleUserThemeSwitch = $('#checkbox-dark-toggle');
  toggleUserThemeSwitch.change((e) => {
    if (e.target.checked) {
      doc.attr('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
    }
    else {
      doc.attr('data-theme', 'light');
      localStorage.setItem('theme', 'light');
    }
    // macOSの「外観」に任せる自動ONか
    if (localStorage.getItem('system-theme', false) === true ){
      // システムに任せるならユーザー操作を禁止する
      toggleUserThemeSwitch.prop('disabled', true);
    }
    else{
      // ユーザー操作ON
      toggleUserThemeSwitch.prop('disabled', false);
    }
  });

  // システムの外観モード自動ON/OFFスイッチ
  const toggleSystemThemeSwitch = $('#checkbox-system-toggle');
  toggleSystemThemeSwitch.change(async(e) => {
    if (e.target.checked) {
      localStorage.setItem('system-theme', true);
      // 自動ONならシステムのテーマに従う
      const result = await window.api.CheckSytemTheme("ipc-system-theme");
      if (result === true) {
        toggleUserThemeSwitch.prop('checked', true).change().prop('disabled', true);
      }
      else {
        toggleUserThemeSwitch.prop('checked', false).change().prop('disabled', true);
      }
    }
    else {
      // 自動OFFならユーザーの手動テーマに変更する
      localStorage.setItem('system-theme', false);
      toggleUserThemeSwitch.prop('disabled', false);
    }
  });
  
  $(document).ready(function(){
    // ローカルストレージから「ダークモード」の設定を読み込む
    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
    if (currentTheme) {
      // ダークモードならCSSを切り替える（デフォルトはライトモード）
      doc.attr('data-theme', currentTheme);
      if (currentTheme === 'dark') {
        toggleUserThemeSwitch.prop('checked', true);
      }
    }
    // transition後に表示
    $("#dark-mode-toggle").show();
  });

  // macOSのシステムからテーマを変更されたとき
  window.api.ChangeSystemTheme("ipc-change-system-theme", (flag) => {
    if (toggleSystemThemeSwitch.prop('checked') === true ){
      toggleUserThemeSwitch.prop('disabled', false).prop('checked', flag).change().prop('disabled', true);
    }
  });

</script>

</body>
</html>

